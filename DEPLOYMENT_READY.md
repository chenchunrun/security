# è…¾è®¯äº‘éƒ¨ç½²å‡†å¤‡å·¥ä½œå®Œæˆæ€»ç»“

**å®Œæˆæ—¶é—´**: 2026-01-06
**çŠ¶æ€**: âœ… å‡†å¤‡å·¥ä½œå®Œæˆï¼Œç­‰å¾…æ‰§è¡Œ
**ä¸‹ä¸€æ­¥**: æŒ‰ç…§ `TENCENT_CLOUD_DEPLOYMENT_STEPS.md` æ‰§è¡Œéƒ¨ç½²

---

## ğŸ“¦ å·²å®Œæˆçš„å·¥ä½œ

### 1. è…¾è®¯äº‘éƒ¨ç½²æ–‡æ¡£ (3 ä¸ª)

#### TENCENT_CLOUD_DEPLOYMENT.md
- å®Œæ•´çš„è…¾è®¯äº‘ CVM éƒ¨ç½²æŒ‡å— (690 è¡Œ)
- åŒ…å«ç¯å¢ƒå‡†å¤‡ã€å®‰å…¨ç»„é…ç½®ã€æ‰‹åŠ¨éƒ¨ç½²å’Œ CI/CD è‡ªåŠ¨åŒ–
- æä¾›ä¸¤ç§éƒ¨ç½²æ–¹å¼: Docker Compose (ç®€å•) å’Œ Kubernetes (ç”Ÿäº§)
- åŒ…å«æ•…éšœæ’é™¤å’Œå¿«é€Ÿå¼€å§‹æ¸…å•

#### TENCENT_CLOUD_DEPLOYMENT_STEPS.md âœ¨ **æ–°å»º**
- **åˆ†æ­¥éª¤éƒ¨ç½²æµç¨‹æŒ‡å—** (æœ€é‡è¦)
- 7 ä¸ªè¯¦ç»†æ­¥éª¤ï¼Œä» CVM åˆå§‹åŒ–åˆ°åŠŸèƒ½æµ‹è¯•
- åŒ…å«å®Œæ•´çš„å‘½ä»¤ç¤ºä¾‹å’Œé¢„æœŸè¾“å‡º
- æ•…éšœæ’é™¤æ¸…å•å’ŒéªŒè¯æ¸…å•

#### PRODUCTION_DEPLOYMENT.md
- ç”Ÿäº§çº§éƒ¨ç½²æ¶æ„è®¾è®¡ (800+ è¡Œ)
- Kubernetes é«˜å¯ç”¨æ¶æ„
- ç›‘æ§ã€å®‰å…¨ã€å¤‡ä»½ç­–ç•¥

### 2. è‡ªåŠ¨åŒ–è„šæœ¬ (2 ä¸ª)

#### deployment/scripts/init-cvm.sh âœ¨ **æ–°å»º**
- CVM åˆå§‹åŒ–è„šæœ¬ (200+ è¡Œ)
- è‡ªåŠ¨å®‰è£… Docker, kubectl, Helm, k3s
- é…ç½®é˜²ç«å¢™è§„åˆ™
- æ˜¾ç¤ºåç»­æ­¥éª¤æç¤º

```bash
# ä½¿ç”¨æ–¹æ³•
wget https://raw.githubusercontent.com/chenchunrun/security/main/deployment/scripts/init-cvm.sh
chmod +x init-cvm.sh
sudo ./init-cvm.sh
```

#### deployment/scripts/verify-deployment.sh âœ¨ **æ–°å»º**
- éƒ¨ç½²éªŒè¯è„šæœ¬ (300+ è¡Œ)
- è‡ªåŠ¨æ£€æŸ¥åŸºç¡€è®¾æ–½ã€å¾®æœåŠ¡ã€åŠŸèƒ½ã€æ€§èƒ½
- Kubernetes å’Œ Docker Compose çŠ¶æ€æ£€æŸ¥
- æµ‹è¯•ç»“æœæ±‡æ€»å’Œé€šè¿‡ç‡è®¡ç®—

```bash
# ä½¿ç”¨æ–¹æ³•
./verify-deployment.sh staging http://localhost
```

### 3. CI/CD é…ç½® (å·²å­˜åœ¨)

#### .github/workflows/ci-cd.yml
- GitHub Actions å·¥ä½œæµ (400+ è¡Œ)
- ä»£ç è´¨é‡æ£€æŸ¥ã€å®‰å…¨æ‰«æã€è‡ªåŠ¨éƒ¨ç½²
- æ”¯æŒ Staging (è‡ªåŠ¨) å’Œ Production (æ‰‹åŠ¨)

#### deployment/helm/security-triage/values.yaml
- Helm Charts é…ç½® (400+ è¡Œ)
- 15 ä¸ªå¾®æœåŠ¡å®Œæ•´é…ç½®
- èµ„æºé…é¢ã€è‡ªåŠ¨æ‰©ç¼©å®¹ã€ç›‘æ§

#### deployment/scripts/deploy.sh
- éƒ¨ç½²è‡ªåŠ¨åŒ–è„šæœ¬ (300+ è¡Œ)
- å¤‡ä»½ã€éƒ¨ç½²ã€éªŒè¯ã€å›æ»š

---

## ğŸ¯ ç°åœ¨æ‚¨éœ€è¦åšä»€ä¹ˆ

### ç«‹å³è¡ŒåŠ¨é¡¹

#### 1. åˆå§‹åŒ–è…¾è®¯äº‘ CVM â³

**SSH è¿æ¥åˆ°æ‚¨çš„ CVM**:
```bash
ssh ubuntu@your-cvm-ip-address
```

**ä¸‹è½½å¹¶è¿è¡Œåˆå§‹åŒ–è„šæœ¬**:
```bash
wget https://raw.githubusercontent.com/chenchunrun/security/main/deployment/scripts/init-cvm.sh
chmod +x init-cvm.sh
sudo ./init-cvm.sh
```

**é¢„è®¡æ—¶é—´**: 5-10 åˆ†é’Ÿ

#### 2. é…ç½® GitHub Actions Secrets â³

**è·å– kubeconfig** (åœ¨ CVM ä¸Š):
```bash
# å¦‚æœå®‰è£…äº† k3s
sudo cat /etc/rancher/k3s/k3s.yaml

# æˆ–ä½¿ç”¨å…¶ä»–æ–¹æ³•
kubectl config view --raw
```

**æ·»åŠ åˆ° GitHub**:
1. è®¿é—®: https://github.com/chenchunrun/security/settings/secrets/actions
2. ç‚¹å‡» "New repository secret"
3. Name: `KUBE_CONFIG_STAGING`
4. Value: ç²˜è´´ kubeconfig å†…å®¹

#### 3. è§¦å‘ CI/CD éƒ¨ç½² â³

**åœ¨æœ¬åœ°æœºå™¨ä¸Šæ‰§è¡Œ**:
```bash
cd /Users/newmba/security
git checkout develop
git push origin develop
```

**è¿™ä¼šè‡ªåŠ¨è§¦å‘**:
- âœ… ä»£ç è´¨é‡æ£€æŸ¥
- âœ… å•å…ƒæµ‹è¯•
- âœ… å®‰å…¨æ‰«æ
- âœ… é•œåƒæ„å»ºå’Œæ¨é€
- âœ… **è‡ªåŠ¨éƒ¨ç½²åˆ° Staging ç¯å¢ƒ**

#### 4. éªŒè¯éƒ¨ç½² â³

**ä¸‹è½½éªŒè¯è„šæœ¬** (åœ¨ CVM ä¸Š):
```bash
wget https://raw.githubusercontent.com/chenchunrun/security/main/deployment/scripts/verify-deployment.sh
chmod +x verify-deployment.sh
./verify-deployment.sh staging http://localhost
```

**é¢„æœŸç»“æœ**:
```
é€šè¿‡ç‡: 100%
éƒ¨ç½²éªŒè¯é€šè¿‡ï¼âœ“
```

---

## ğŸ“š å…³é”®æ–‡æ¡£ç´¢å¼•

### ğŸš€ å¿«é€Ÿå¼€å§‹
- **TENCENT_CLOUD_DEPLOYMENT_STEPS.md** â† **ä»è¿™é‡Œå¼€å§‹ï¼**
  - å®Œæ•´çš„ 7 æ­¥éƒ¨ç½²æµç¨‹
  - æ‰€æœ‰å‘½ä»¤å¯ç›´æ¥å¤åˆ¶æ‰§è¡Œ

### ğŸ“– è¯¦ç»†æŒ‡å—
- **TENCENT_CLOUD_DEPLOYMENT.md** - è…¾è®¯äº‘å¹³å°ç‰¹å®šæŒ‡å—
- **PRODUCTION_DEPLOYMENT.md** - ç”Ÿäº§éƒ¨ç½²æ¶æ„
- **PRODUCTION_CI_CD_SUMMARY.md** - CI/CD æ–¹æ¡ˆæ€»ç»“

### ğŸ”§ è„šæœ¬å·¥å…·
- **deployment/scripts/init-cvm.sh** - CVM åˆå§‹åŒ–
- **deployment/scripts/verify-deployment.sh** - éƒ¨ç½²éªŒè¯
- **deployment/scripts/deploy.sh** - æ‰‹åŠ¨éƒ¨ç½²

### ğŸ“‹ é…ç½®æ–‡ä»¶
- **.github/workflows/ci-cd.yml** - CI/CD å·¥ä½œæµ
- **deployment/helm/security-triage/values.yaml** - Helm é…ç½®
- **deployment/helm/security-triage/Chart.yaml** - Helm Chart

---

## âœ… éƒ¨ç½²æˆåŠŸæ ‡å‡†

å®Œæˆä»¥ä¸‹æ£€æŸ¥é¡¹å³è¡¨ç¤ºéƒ¨ç½²æˆåŠŸ:

- [ ] GitHub Actions workflow å…¨éƒ¨é€šè¿‡
- [ ] æ‰€æœ‰ Kubernetes Pods çŠ¶æ€ä¸º `Running`
- [ ] éªŒè¯è„šæœ¬æµ‹è¯•é€šè¿‡ç‡ â‰¥ 90%
- [ ] å¯æˆåŠŸæäº¤æµ‹è¯•å‘Šè­¦
- [ ] å¯æŸ¥è¯¢å‘Šè­¦åˆ—è¡¨
- [ ] Web Dashboard å¯è®¿é—®
- [ ] API å“åº”æ—¶é—´ < 1s

---

## ğŸ¯ éƒ¨ç½²æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. åˆå§‹åŒ– CVM                                                â”‚
â”‚    SSH è¿æ¥ â†’ è¿è¡Œ init-cvm.sh â†’ éªŒè¯å®‰è£…                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. é…ç½® GitHub Secrets                                       â”‚
â”‚    è·å– kubeconfig â†’ æ·»åŠ åˆ° GitHub Actions Secrets           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. è§¦å‘ CI/CD                                                â”‚
â”‚    git push origin develop â†’ GitHub Actions è‡ªåŠ¨è¿è¡Œ         â”‚
â”‚    â†’ è´¨é‡æ£€æŸ¥ â†’ æ„å»º â†’ éƒ¨ç½²åˆ° Staging                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. éªŒè¯éƒ¨ç½²                                                  â”‚
â”‚    è¿è¡Œ verify-deployment.sh â†’ æ£€æŸ¥æœåŠ¡å’ŒåŠŸèƒ½                â”‚
â”‚    â†’ é€šè¿‡ç‡ â‰¥ 90% = æˆåŠŸ                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. åŠŸèƒ½æµ‹è¯•                                                  â”‚
â”‚    æäº¤æµ‹è¯•å‘Šè­¦ â†’ æŸ¥è¯¢ç»“æœ â†’ è®¿é—® Web Dashboard              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
                   âœ… éƒ¨ç½²æˆåŠŸï¼
```

---

## ğŸ†˜ éœ€è¦å¸®åŠ©?

### é—®é¢˜æ’æŸ¥æŒ‡å—

1. **GitHub Actions å¤±è´¥** â†’ æŸ¥çœ‹ Actions æ—¥å¿—ï¼Œæ£€æŸ¥æµ‹è¯•å’Œæ„å»ºæ­¥éª¤
2. **Pod æ— æ³•å¯åŠ¨** â†’ ä½¿ç”¨ `kubectl describe pod` å’Œ `kubectl logs` æ’æŸ¥
3. **æœåŠ¡æ— æ³•è®¿é—®** â†’ æ£€æŸ¥ Security Group å’Œé˜²ç«å¢™è§„åˆ™
4. **æ•°æ®åº“è¿æ¥å¤±è´¥** â†’ æ£€æŸ¥ PostgreSQL çŠ¶æ€å’Œ Secret é…ç½®

### è·å–æ”¯æŒ

- **æ–‡æ¡£**: å‚è€ƒ `TENCENT_CLOUD_DEPLOYMENT.md` çš„æ•…éšœæ’é™¤ç« èŠ‚
- **Issues**: https://github.com/chenchunrun/security/issues
- **è¯¦ç»†æ­¥éª¤**: æŸ¥çœ‹ `TENCENT_CLOUD_DEPLOYMENT_STEPS.md`

---

## ğŸ“Š é¡¹ç›®çŠ¶æ€æ€»è§ˆ

### å·²å®Œæˆ (Stages 0-5)
- âœ… **Stage 0**: åŸºç¡€è®¾æ–½ (Docker Compose, PostgreSQL, Redis, RabbitMQ)
- âœ… **Stage 1**: æ ¸å¿ƒæ¥å…¥æœåŠ¡ (Alert Ingestor, Normalizer)
- âœ… **Stage 2**: æ•°æ®å¢å¼ºæœåŠ¡ (Context Collector, Threat Intel, LLM Router)
- âœ… **Stage 3**: AI åˆ†ææœåŠ¡ (AI Triage Agent, Similarity Search)
- âœ… **Stage 4**: å·¥ä½œæµä¸è‡ªåŠ¨åŒ– (Workflow Engine, Automation Orchestrator, Notification)
- âœ… **Stage 5**: æ”¯æŒæœåŠ¡ä¸å‰ç«¯ (Analytics, Reporting, Config, Monitoring, Web Dashboard, Kong)

### ç”Ÿäº§éƒ¨ç½²å‡†å¤‡
- âœ… Kubernetes é…ç½® (Helm Charts)
- âœ… CI/CD æµæ°´çº¿ (GitHub Actions)
- âœ… ç›‘æ§å’Œå‘Šè­¦ (Prometheus + Grafana)
- âœ… å®‰å…¨åŠ å›ºç­–ç•¥
- âœ… å¤‡ä»½å’Œæ¢å¤æµç¨‹
- âœ… **è…¾è®¯äº‘éƒ¨ç½²æŒ‡å—å’Œè„šæœ¬**

### å¾…å®Œæˆ (Stage 6)
- â³ å®é™…éƒ¨ç½²æµ‹è¯•
- â³ æ€§èƒ½ä¼˜åŒ–
- â³ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

---

## ğŸ‰ æ€»ç»“

æ‰€æœ‰å‡†å¤‡å·¥ä½œå·²å®Œæˆï¼æ‚¨ç°åœ¨æ‹¥æœ‰:

1. âœ… **å®Œæ•´çš„å¾®æœåŠ¡ç³»ç»Ÿ** (15 ä¸ªæœåŠ¡)
2. âœ… **CI/CD è‡ªåŠ¨åŒ–** (GitHub Actions)
3. âœ… **Kubernetes éƒ¨ç½²é…ç½®** (Helm Charts)
4. âœ… **è…¾è®¯äº‘éƒ¨ç½²æŒ‡å—** (è¯¦ç»†æ­¥éª¤)
5. âœ… **è‡ªåŠ¨åŒ–è„šæœ¬** (åˆå§‹åŒ–å’ŒéªŒè¯)

**ä¸‹ä¸€æ­¥**: æ‰“å¼€ `TENCENT_CLOUD_DEPLOYMENT_STEPS.md`ï¼ŒæŒ‰ç…§ 7 ä¸ªæ­¥éª¤å®Œæˆéƒ¨ç½²ã€‚

---

**åˆ›å»ºæ—¶é—´**: 2026-01-06
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**çŠ¶æ€**: å‡†å¤‡å°±ç»ªï¼Œç­‰å¾…æ‰§è¡Œ

**ğŸš€ å‡†å¤‡å¥½å¼€å§‹åœ¨è…¾è®¯äº‘ä¸Šéƒ¨ç½²æ‚¨çš„ Security Alert Triage Systemï¼**
